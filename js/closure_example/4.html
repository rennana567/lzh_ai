<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
<input type="text" id="inputC">
<script>
    const ajax = function(content){// 被节流的函数
        // fetch
        // XMLHTTPRequest
        console.log('ajax request' + content)
    }

    let throttleAjax = throttle(ajax,200);

    function throttle(fn,delay){
        let last,// 上一次执行的时间
        defterTimer;// timeout id
        return function(args){
            let that = this; // 闭包的应用场景
            let _args = arguments;
            let now = + new Date(); // 类型转换
            if(last && now < last + delay){
                clearTimeout(defterTimer);
                defterTimer = setTimeout(function(){
                    last = now;
                    fn.apply(that,_args);
                },delay)
            }else {
                last = now;
                fn.apply(that,_args);
            }

        }
    }

    let inputC =document.getElementById('inputC')
    inputC.addEventListener('keyup',function(e){
        throttleAjax(e.target.value)
    })
</script>
</body>
</html>